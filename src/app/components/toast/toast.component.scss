:host {
  position: fixed;
  top: var(--spacing-lg);    /* Use global var (24px) */
  right: var(--spacing-lg);   /* Use global var (24px) */
  z-index: 1050;             /* Keep it above modals */
  width: auto;
  max-width: 380px;
  display: flex;
  flex-direction: column;
  align-items: flex-end;
}

.toast {
  /* Use global variables for theme */
  background: rgba(255, 255, 255, 0.92); /* Glassmorphism from your theme */
  backdrop-filter: blur(15px);
  border-radius: var(--border-radius-lg);   /* Use global var (12px) */
  box-shadow: var(--box-shadow-lg);        /* Use global var */
  border: var(--border-width) solid rgba(255, 255, 255, 0.4);
  color: var(--gray-800);                  /* Use global var */

  /* Layout and spacing */
  padding: var(--spacing-md);             /* Use global var (16px) */
  display: flex;
  justify-content: space-between;
  
  /* --- START OF CHANGE --- */
  /* Align items to the top to better handle multi-line messages */
  align-items: flex-start; 
  /* --- END OF CHANGE --- */
  
  margin-bottom: var(--spacing-sm);       /* Use global var (8px) */
  transition: all var(--transition-duration) var(--transition-smooth); /* Use global vars */

  /* Left border for type indication */
  border-left: 5px solid transparent;

  &.toast-success {
    border-left-color: var(--color-success);
  }

  &.toast-error {
    border-left-color: var(--color-danger);
  }

  &.toast-info {
    border-left-color: var(--color-info); /* This uses --teal-blue */
  }

  &.toast-warning {
    border-left-color: var(--color-warning);
  }
}

.toast-content {
  display: flex;
  align-items: center;
  flex-grow: 1;
  margin-right: var(--spacing-md); /* Use global var (16px) */
  /* --- NEW --- */
  /* Ensure content can shrink if close button is present */
  min-width: 0;
}

.toast-message {
  flex-grow: 1;
  font-size: 0.9375rem; /* 15px */
  line-height: var(--line-height-base); /* Use global var */
  /* Allow message to wrap if needed */
  white-space: pre-wrap;
  word-wrap: break-word;
  /* Add overflow-wrap for good measure */
  overflow-wrap: break-word;
}

.toast-close-btn {
  background: none;
  border: none;
  color: var(--gray-400); /* Use global var */
  font-size: 1.6rem;
  font-weight: bold;
  line-height: 1;
  opacity: 0.8;
  cursor: pointer;
  padding: 0 5px;
  margin-left: var(--spacing-sm); /* Use global var (8px) */
  align-self: flex-start;
  transition: color var(--transition-fast) ease; /* Use global var */
  /* --- NEW --- */
  flex-shrink: 0; /* Prevent close button from shrinking */

  &:hover {
    opacity: 1;
    color: var(--gray-700); /* Use global var */
  }
}

/* --- Animations --- */
.toast {
  animation: toast-slide-in var(--transition-duration) var(--transition-smooth) forwards;
}

@keyframes toast-slide-in {
  from {
    opacity: 0;
    transform: translateX(30px);
  }
  to {
    opacity: 1;
    transform: translateX(0);
  }
}

.toast-fade-out {
  animation: toast-slide-out var(--transition-duration) var(--transition-smooth) forwards;
}

@keyframes toast-slide-out {
  from {
    opacity: 1;
    transform: translateX(0);
  }
  to {
    opacity: 0;
    transform: translateX(30px);
    margin-bottom: -10px;
    padding-top: 0;
    padding-bottom: 0;
    min-height: 0;
    border-width: 0;
  }
}

/* --- Responsive Media Query (Tablet) --- */
@media (max-width: 768px) {
  :host {
    /* Move closer to the edge */
    top: var(--spacing-md);
    right: var(--spacing-md);
    /* Allow it to be a bit wider on tablets */
    max-width: 420px;
  }
}


/* --- Responsive Media Query (Mobile) --- */
@media (max-width: 480px) {
  :host {
    /* Pin to top, full width with padding */
    top: var(--spacing-md);
    left: var(--spacing-md);
    right: var(--spacing-md);
    width: auto;      /* Let left/right positioning define width */
    max-width: 100%;  /* Override desktop max-width */
    align-items: stretch; /* Make toasts full width */
  }

  .toast {
    min-width: 0; /* Allow toast to be smaller than 320px */
    width: 100%;
    padding: var(--spacing-sm) var(--spacing-md); /* Smaller padding */
  }

  .toast-message {
    font-size: 0.875rem; /* 14px, slightly smaller for mobile */
  }

  .toast-close-btn {
    font-size: 1.5rem;
  }
}