:host {
  display: block;
  width: 100%;
}

// --- NEW STYLES ---

// Main container
.grid-container {
  display: flex;
  flex-direction: column;
  width: 100%;
  border: var(--border-width) solid var(--border-color);
  border-radius: var(--border-radius-md);
  overflow: hidden; // Clip corners
  box-shadow: var(--box-shadow-md);
  background-color: var(--white);
}

// Wrapper for the header table
.grid-header-wrapper {
  overflow-x: hidden; // Synced by JS, hide scrollbar
}

// Wrapper for the body (virtual scroller)
.grid-body-wrapper {
  overflow-x: auto; // This drives horizontal scrolling
  overflow-y: hidden; // Viewport handles vertical
  -webkit-overflow-scrolling: touch;
}

// CDK Viewport
.virtual-viewport {
  height: 100%;
  width: 100%;
}

// Common table styles
.header-table,
.data-table {
  width: 100%;
  table-layout: fixed; // ESSENTIAL for resizing
  border-collapse: collapse;
}

// --- MODIFIED HEADER STYLES ---
.header-table thead th {
  // Original styles
  background-color: var(--teal-blue);
  color: var(--white);
  font-weight: var(--font-weight-medium);
  text-align: left;
  user-select: none;
  padding: var(--spacing-sm) var(--spacing-md);

  // New styles for resizing
  position: relative; // For resizer
  overflow: hidden; // Clip text
}

// Wrapper for header text to enable ellipsis
.header-content {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

// --- MODIFIED SORTING STYLES ---

// Sorting styles now target the .header-content
.header-table thead th.sortable {
  cursor: pointer;
  transition: filter 0.2s ease;
}
.header-table thead th.sortable:hover {
  filter: brightness(1.2);
}

// Sorting arrows (moved to ::after on the content)
.header-table thead th.sortable .header-content::after {
  content: '';
  display: inline-block;
  margin-left: 0.5rem;
  font-size: 0.8em;
}
.header-table thead th.sortable:not(.sorted-asc):not(.sorted-desc)
  .header-content::after {
  content: '▲▼';
  opacity: 0.5;
}
.header-table thead th.sorted-asc .header-content::after {
  content: '▲';
  opacity: 1;
  color: var(--white);
}
.header-table thead th.sorted-desc .header-content::after {
  content: '▼';
  opacity: 1;
  color: var(--white);
}

// --- NEW RESIZER STYLES ---

.resizer {
  position: absolute;
  top: 0;
  right: 0;
  width: 8px; // Make it a bit wider for easier grabbing
  height: 100%;
  cursor: col-resize;
  z-index: 1;
  // background: rgba(0, 0, 0, 0.1); // Uncomment to debug
}

// Change cursor when resizing
.grid-container.resizing {
  cursor: col-resize;
}

// --- MODIFIED BODY/ROW STYLES ---

.data-table tbody tr {
  cursor: pointer;
  transition: background-color 0.2s ease;
  border-bottom: var(--border-width) solid var(--border-color);
}
.data-table tbody tr:last-child {
  border-bottom: none;
}

.data-table td {
  padding: var(--spacing-sm) var(--spacing-md);
  overflow: hidden; // Clip text
}

// Wrapper for cell text to enable ellipsis
.cell-content {
  overflow: hidden;
  text-overflow: ellipsis;
  white-space: nowrap;
}

.data-table tbody tr:hover {
  background-color: var(--aqua-island);
}
.data-table tbody tr.selected {
  background-color: var(--aqua-island-light);
  color: var(--peacock-blue);
}
.data-table tbody tr.selected:hover {
  background-color: var(--aqua-island-light);
}

// --- NO DATA (Unchanged) ---
.no-data-message {
  background-color: var(--white);
  box-shadow: var(--box-shadow-md);
  border-radius: var(--border-radius-md);
  border: var(--border-width) solid var(--border-color);
  padding: var(--spacing-lg);
  color: var(--gray-500);
  text-align: center;
  font-style: italic;
}