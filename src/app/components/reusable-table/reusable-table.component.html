<div class="reusable-table-wrapper">
  
  <div class="loading-shade" *ngIf="isLoading">
    <mat-spinner diameter="40"></mat-spinner>
  </div>

  <div class="table-container">
    <table
      mat-table
      [dataSource]="dataSource"
      matSort
      (matSortChange)="onMatSortChange($event)"
    >
      <ng-container *ngFor="let col of columns" [matColumnDef]="col.key">
        
        <th
          mat-header-cell
          *matHeaderCellDef
          [mat-sort-header]="col.key"
          [disabled]="!col.sortable"
        >
          <div class="header-content" [appTooltip]="col.label">
            {{ col.label }}
          </div>
        </th>
        
        <td mat-cell *matCellDef="let element">
          <div class="cell-content" [appTooltip]="element[col.key]">
            {{ element[col.key] }}
          </div>
        </td>

      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
      
      <tr
        mat-row
        *matRowDef="let row; columns: displayedColumns"
        (click)="onRowClick(row)"
        class="clickable-row"
        [ngClass]="{ 'selected': row === selectedRow }"
      ></tr>

      <tr class="mat-row" *matNoDataRow>
        <td class="mat-cell no-data-cell" [attr.colspan]="displayedColumns.length">
          <div class="no-data-container">
            <mat-icon class="no-data-icon">inbox</mat-icon>
            <p class="no-data-text">
              {{ searchTerm ? 'Không tìm thấy kết quả phù hợp "' + searchTerm + '"' : 'Không có dữ liệu' }}
            </p>
          </div>
        </td>
      </tr>
    </table>
  </div>

  <mat-paginator
    [pageSize]="pageSize"
    [pageSizeOptions]="pageSizeOptions"
    showFirstLastButtons
    aria-label="Select page of results"
    class="sticky-paginator"
  >
  </mat-paginator>
</div>