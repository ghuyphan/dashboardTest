<div class="device-form-container">
  <form [formGroup]="deviceForm" (ngSubmit)="onSave()" novalidate>
    <div class="form-body">
      <div class="form-grid">
        <div class="form-group">
          <label for="ma">Mã thiết bị</label>
          <input
            id="ma"
            type="text"
            class="form-control"
            formControlName="Ma"
            [class.is-invalid]="isInvalid('Ma')"
          />
          <div *ngIf="isInvalid('Ma')" class="invalid-feedback">
            Mã là bắt buộc.
          </div>
        </div>

        <div class="form-group">
          <label for="ten">Tên thiết bị</label>
          <input
            id="ten"
            type="text"
            class="form-control"
            formControlName="Ten"
            [class.is-invalid]="isInvalid('Ten')"
          />
          <div *ngIf="isInvalid('Ten')" class="invalid-feedback">
            Tên là bắt buộc.
          </div>
        </div>

        <div class="form-group">
          <label for="model">Model</label>
          <input
            id="model"
            type="text"
            class="form-control"
            formControlName="Model"
          />
        </div>

        <div class="form-group">
          <label for="serial">Serial Number</label>
          <input
            id="serial"
            type="text"
            class="form-control"
            formControlName="SerialNumber"
          />
        </div>

        <div class="form-group">
          <label for="loaiThietBi">Loại thiết bị</label>
          <select
            id="loaiThietBi"
            class="form-control"
            formControlName="LoaiThietBi_Id"
            [class.is-invalid]="isInvalid('LoaiThietBi_Id')"
          >
            <option [ngValue]="null" disabled>-- Chọn loại --</option>
            <option *ngFor="let type of deviceTypes" [ngValue]="type.id">
              {{ type.ten }}
            </option>
          </select>
          <div *ngIf="isInvalid('LoaiThietBi_Id')" class="invalid-feedback">
            Vui lòng chọn loại thiết bị.
          </div>
        </div>

        <div class="form-group">
          <label for="trangThai">Trạng thái</label>
          <select
            id="trangThai"
            class="form-control"
            formControlName="TrangThai_Ten"
            [class.is-invalid]="isInvalid('TrangThai_Ten')"
          >
            <option *ngFor="let status of deviceStatuses" [ngValue]="status">
              {{ status }}
            </option>
          </select>
        </div>

        <div class="form-group span-2">
          <label for="viTri">Vị trí</label>
          <input
            id="viTri"
            type="text"
            class="form-control"
            formControlName="ViTri"
          />
        </div>
      </div>
    </div>

    <div class="form-actions">
      <button
        type="button"
        class="btn btn-secondary"
        (click)="onCancel()"
        [disabled]="isLoading"
      >
        Hủy bỏ
      </button>
      <button
        type="submit"
        class="btn btn-primary"
        [disabled]="deviceForm.invalid || isLoading"
      >
        <span *ngIf="!isLoading">Lưu</span>
        <span *ngIf="isLoading">Đang lưu...</span>
      </button>
    </div>
  </form>
</div>