<div class="page-container">
  <div class="page-content">
    
    <app-date-filter
      (filterSubmit)="onDateFilter($event)"
      [isLoading]="isLoading"
      buttonLabel="Xem báo cáo"
    ></app-date-filter>

    <div class="dashboard-grid">
      
      <app-chart-card
        class="grid-item span-full"
        title="Thống kê bác sĩ chưa tạo bệnh án"
        icon="fas fa-chart-bar"
        iconClass="icon-info"
        [isLoading]="isLoading"
        [chartOptions]="doctorChartOptions"
        skeletonType="bar"
        [theme]="themeService.isDarkTheme() ? 'dark' : 'light'"
        emptyText="Không có dữ liệu trong khoảng thời gian này."
      >
        <div header-actions>
          <ng-container *appHasPermission="'KHTH.ChuaTaoHSBANgoaiTru.REXPORT'">
            <button 
              class="btn-icon-text" 
              (click)="onExport()" 
              title="Tải dữ liệu chi tiết và xuất Excel"
              [disabled]="isLoading || isExporting || !summaryData.length">
              
              @if (isExporting) {
                <i class="fas fa-spinner fa-spin text-success"></i>
                <span>Đang xử lý...</span>
              } @else {
                <i class="fas fa-file-excel text-success"></i>
                }
            </button>
          </ng-container>
        </div>

      </app-chart-card>

    </div>
  </div>
</div>